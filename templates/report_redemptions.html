{% extends "base.html" %}
{% block title %}{{ _('Redemption Report') }}{% endblock %}

{% block content %}
<div style="max-width: 1000px; margin: 0 auto; background: white; padding: 24px; border-radius: 12px; box-shadow: 0 1px 3px rgba(0,0,0,0.05);">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
        <div>
            <a href="{{ url_for('index') }}" style="color: #1f6feb; text-decoration: none; font-size: 13px;">&larr; {{ _('Back to Dashboard') }}</a>
            <h1 style="margin: 8px 0 0; color: #0f172a; font-size: 24px;">{{ _('Redemption Log') }}</h1>
        </div>
        <a href="/api/reports/redemptions/csv" style="background: #1f6feb; color: white; padding: 10px 16px; border-radius: 6px; text-decoration: none; font-weight: 600; font-size: 14px;">
            ðŸ“¥ {{ _('Download CSV') }}
        </a>
    </div>

    <table style="width: 100%; border-collapse: collapse; font-size: 14px;">
        <thead>
            <tr style="background: #f8fafc; border-bottom: 2px solid #e2e8f0; text-align: left;">
                <th style="padding: 12px;">{{ _('Date') }}</th>
                <th style="padding: 12px;">{{ _('Student') }}</th>
                <th style="padding: 12px;">{{ _('Classroom') }}</th>
                <th style="padding: 12px;">{{ _('Prize') }}</th>
                <th style="padding: 12px; text-align: right;">{{ _('Points') }}</th>
                <th style="padding: 12px;">{{ _('Staff') }}</th>
            </tr>
        </thead>
        <tbody>
            {% for row in rows %}
            <tr style="border-bottom: 1px solid #f1f5f9;">
                <td style="padding: 12px; color: #64748b;">{{ row.timestamp }}</td>
                <td style="padding: 12px; font-weight: 600;">{{ row.full_name }}</td>
                <td style="padding: 12px;">{{ row.classroom }} <span style="color: #94a3b8; font-size: 11px;">({{ row.grade }})</span></td>
                <td style="padding: 12px;">{{ row.activity_type.replace('Redemption: ', '') }}</td>
                <td style="padding: 12px; text-align: right; color: #dc2626; font-weight: 700;">{{ row.points }}</td>
                <td style="padding: 12px; font-size: 12px;">{{ row.recorded_by }}</td>
            </tr>
            {% else %}
            <tr><td colspan="6" style="padding: 40px; text-align: center; color: #94a3b8;">{{ _('No redemptions found.') }}</td></tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}